# Story 1.5.13: UX Enhancement - Sidebar & Bookmark Polish

**Epic:** 1.5 - UX Enhancement  
**Priority:** P1 (High)  
**Status:** Approved  
**Type:** Enhancement / Polish  
**Estimated Effort:** 2.5-3.5 hours

---

## Story

**As a** user,  
**I want** helpful progress statistics in the sidebar when browsing chapters and clearer bookmark actions,  
**so that** I have better context for my learning journey and can interact with bookmarks without confusion.

---

## Context

**Trigger:** UX audit (Sally) identified 2 high-priority UX enhancements:
1. Empty sidebar on `/chapters` page provides no value (wasted space)
2. Misleading Edit button on bookmark cards creates confusion

**Impact:** Reduced navigation context, missed engagement opportunity, interaction friction.

**Reference Documents:**
- `docs/UX-IMPROVEMENT-RECOMMENDATIONS.md` (Issues #4, #5)
- `scratchpad/sample_chapter_demo_v23.html` (mockup reference)

---

## Acceptance Criteria

1. **Populate /chapters Sidebar with Progress Statistics (Issue #4)**
   - Sidebar on `/chapters` page displays overview statistics instead of empty space
   - Statistics section includes:
     - Heading: "ðŸ“š Your Progress"
     - Concepts completed count (e.g., "ðŸŸ¢ 5 Concepts Completed")
     - Free concepts available (e.g., "ðŸ“– 144 Free Concepts Available")
     - Premium concepts locked (e.g., "ðŸ”’ 179 Premium Locked")
     - Bookmarks count (e.g., "ðŸ”– 6 Bookmarks")
   - Statistics are fetched from user progress data (API or existing state)
   - Statistics update dynamically as user progresses
   - Section is visually distinct with proper spacing and typography
   - Sidebar still includes quick action buttons (All Chapters, Progress, Bookmarks)
   - Matches design intent from recommendations document

2. **Remove Misleading Edit Button from Bookmarks (Issue #5)**
   - Bookmark cards show only 2 action buttons instead of 3
   - Buttons displayed:
     - "View" or "View Concept" (eye icon) - navigates to concept page
     - "Remove" (trash icon) - removes bookmark
   - "Edit Note" button is completely removed
   - Buttons are clearly labeled with icons and text
   - Button spacing and alignment remain clean
   - User can still edit notes by navigating to concept page and using "Take Notes" feature

3. **Visual Validation**
   - Sidebar on `/chapters` page feels valuable and informative
   - Bookmark cards feel cleaner with 2-button layout
   - No layout regressions on other pages
   - Interactions are intuitive and clear

---

## Tasks / Subtasks

### Task 1: Create Progress Statistics Component (AC #1) - 2-2.5 hours
- [ ] Create new component: `ProgressStatistics.tsx` or integrate into existing sidebar logic
  - [ ] Component accepts user progress data as props
  - [ ] Displays 4 key statistics with icons:
    - [ ] Completed concepts count
    - [ ] Free concepts available count
    - [ ] Premium concepts locked count
    - [ ] Bookmarks count
- [ ] Fetch user progress data:
  - [ ] Determine data source (existing API endpoint, context, or state)
  - [ ] Fetch user's completed concepts count
  - [ ] Fetch user's bookmarks count
  - [ ] Calculate free concepts (144 total for chapters 1-4)
  - [ ] Calculate premium concepts (179 total for chapters 5-8)
- [ ] Update `/chapters` page or sidebar routing logic:
  - [ ] Detect when route is `/chapters`
  - [ ] Render `ProgressStatistics` component in sidebar content area
  - [ ] Position below logo section, above quick action buttons
- [ ] Style component to match design system:
  - [ ] Section heading: "ðŸ“š Your Progress" (H4, gray, 0.9rem)
  - [ ] Stat items: Icon + count + label
  - [ ] Proper spacing (8px scale)
  - [ ] Use emoji icons or MUI icons consistently
- [ ] Test dynamic updates:
  - [ ] Complete a concept and verify count updates
  - [ ] Add a bookmark and verify count updates

### Task 2: Remove Edit Button from Bookmark Cards (AC #2) - 30 minutes
- [ ] Locate bookmark card component (`apps/web/src/components/Bookmark/BookmarkCard.tsx` or similar)
- [ ] Identify the Edit button code:
  - [ ] Currently shows 3 buttons: View, Edit, Remove
  - [ ] Edit button likely has pencil icon and "edit note" label
- [ ] Remove Edit button:
  - [ ] Delete or comment out Edit button JSX
  - [ ] Remove associated click handler if orphaned
  - [ ] Remove any Edit-specific state if orphaned
- [ ] Adjust button layout:
  - [ ] Ensure View and Remove buttons are properly spaced
  - [ ] Maintain horizontal alignment or update to flex layout
  - [ ] Verify button sizing remains consistent (44px min height)
- [ ] Update any related tests or documentation referencing Edit button

### Task 3: QA & Validation (All ACs) - 30 minutes
- [ ] Test `/chapters` page sidebar statistics:
  - [ ] Verify statistics display correctly
  - [ ] Verify counts are accurate
  - [ ] Test on different user accounts with varying progress
  - [ ] Verify responsive behavior on mobile/tablet
- [ ] Test bookmark cards:
  - [ ] Verify only View and Remove buttons appear
  - [ ] Test View button navigates to correct concept
  - [ ] Test Remove button removes bookmark
  - [ ] Verify no console errors from removed Edit button
- [ ] Cross-browser testing (Chrome, Firefox, Safari)
- [ ] Accessibility check (keyboard navigation, screen reader)

---

## Dev Notes

### Affected Components

1. **Sidebar / Chapters Page:**
   - File: `apps/web/src/app/(authenticated)/chapters/page.tsx` or sidebar routing logic
   - New component: `apps/web/src/components/Sidebar/ProgressStatistics.tsx` (create new)
   - Add conditional rendering: Show progress stats when route is `/chapters`

2. **Bookmark Card:**
   - File: `apps/web/src/components/Bookmark/BookmarkCard.tsx` (or similar)
   - Remove Edit button from button group
   - Keep only View and Remove buttons

### Data Requirements for Progress Statistics

**User Progress Data Needed:**
- Completed concepts count (user-specific)
- Bookmarks count (user-specific)
- Free concepts total (static: 144 from chapters 1-4)
- Premium concepts total (static: 179 from chapters 5-8)

**Potential Data Sources:**
1. Existing API endpoint (e.g., `/api/user/progress`)
2. Existing React context (UserProgressContext or similar)
3. Aggregated from existing data (concept completion tracking from Story 1.5.8)

**Developer Decision:** Use most efficient data source. If no aggregated endpoint exists, calculate from existing completion/bookmark data.

### Design System References

**Progress Statistics Component:**
- Section heading: `text-sm font-semibold text-gray-600 mb-3`
- Stat items:
  - Icon: Emoji or MUI icon (16px)
  - Count: `text-2xl font-bold text-primary`
  - Label: `text-xs text-gray-500`
- Spacing: `space-y-3` between items
- Background: Optional light gray (`bg-gray-50`) with rounded corners

**Bookmark Card Buttons:**
- Button size: `min-h-[44px]` (touch-friendly)
- View button: Primary blue (`bg-primary text-white`)
- Remove button: Outline red (`border-red-500 text-red-500`)
- Gap between buttons: `gap-2` (0.5rem)

### Testing Standards
- **Test Files:** Consider adding unit tests for `ProgressStatistics` component
  - Test rendering with different data values
  - Test data fetching logic (if applicable)
- **Manual Testing:**
  - Visual comparison to recommendations document
  - Test with multiple user accounts at different progress levels
  - Responsive testing at 768px, 1024px, 1280px, 1440px viewports
  - Cross-browser: Chrome, Firefox, Safari
- **Integration Testing:**
  - Verify progress statistics update when user completes concept
  - Verify bookmark count updates when user adds/removes bookmark

### Related Files
- UX recommendations: `docs/UX-IMPROVEMENT-RECOMMENDATIONS.md`
- Frontend spec: `docs/front-end-spec.md`
- Design system: `docs/stories/_design-system-reference.md`
- Existing progress tracking: See Story 1.5.8 implementation

---

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-10-17 | 1.0 | Initial story creation - UX enhancements | Sarah (PO) |

---

## Dev Agent Record

_(To be populated during implementation)_

### Agent Model Used
_(Dev agent to populate)_

### Debug Log References
_(Dev agent to populate)_

### Completion Notes List
_(Dev agent to populate)_

### File List
_(Dev agent to populate)_

---

## QA Results

_(To be populated by QA Agent)_
